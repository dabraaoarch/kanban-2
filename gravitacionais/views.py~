from django.shortcuts import render, get_list_or_404, get_object_or_404, redirect, reverse
from .models import Gravitacional
from .forms import NovoGravitacionalForm

def index(request):
    gravitacionais = Gravitacional.objects.all()
    context = {
        'gravitacionais' : gravitacionais
    }
    return render(request, 'gravitacionais/index.html', context)

def novo_gravitacional(request):
    if request.method == 'POST':
        form = NovoGravitacionalForm(request.POST)
        if form.is_valid():
            gravitacional = form.save(commit=False)
            gravitacional.save()
            return redirect(reverse('gravitacionais:index'))
    else:
        form = NovoGravitacionalForm()
    return render(
        request,
        'gravitacionais/novo_gravitacional.html',
        {'form':form}
    )

def gerir_gravitacional(request, gravitacional_id):
    gravitacional = get_object_or_404(
        Gravitacional,
        pk=gravitacional_id
    )
    context = {
        'gravitacional' : gravitacional
    }
    return render(
        request,
        'gravitacionais/gerir_gravitacional.html',
        context
    )
